generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Metric {
  metricId  String    @id @unique
  eventName String
  events    Event[]
  dumps     Dump[]
  invalids  Invalid[]
}

model Dump {
  id          Int    @id @default(autoincrement())
  uniqueId    String @unique
  metricId    String
  eventName   String
  requestData String
  metric      Metric @relation(fields: [metricId], references: [metricId])
}

model Event {
  id           Int      @id @default(autoincrement())
  createdAt    DateTime @default(now())
  imported     Boolean  @default(false)
  metricId     String
  eventId      String   @unique
  eventName    String
  profileId    String
  userEmail    String
  fetchedEvent String
  newEvent     String
  metric       Metric   @relation(fields: [metricId], references: [metricId])
}

model Invalid {
  id           Int    @id @default(autoincrement())
  metricId     String
  eventId      String @unique
  eventName    String
  profileId    String
  userEmail    String
  fetchedEvent String
  newEvent     String
  metric       Metric @relation(fields: [metricId], references: [metricId])
}
